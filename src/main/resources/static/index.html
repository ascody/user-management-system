<!-- src/main/resources/static/index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>홈</title>
</head>
<body>
<h1>유저 관리 시스템</h1>
<h2 id="welcome"></h2>

<script>
    console.log("index loaded");
    const token = localStorage.getItem("accessToken");

    fetch("/api/users/me", {
        headers: {
            "Authorization": `Bearer ${token}`
        }
    })
    .then (res => {
        if (!res.ok) throw new Error("인증 실패");
        return res.json();
    })
    .then (data => {
        document.getElementById("welcome").textContent = `환영합니다, ${data.nickname}님!`;
    })
    .catch (err => {
        console.error("error: " + err);
        localStorage.removeItem("accessToken");
        window.location.href = "login.html";
    });
</script>
</body>
</html>
